<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loaded Transfers</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
  </style>
</head>
<body>
  <h2>Loaded Transfer Packages</h2>
  <table id="data-table"></table>

  <script>
    function renderTable(data) {
      const headers = ['From', 'To', 'Dept', 'Transfer', 'Date', 'Packages'];
      const table = document.getElementById('data-table');
      table.innerHTML = '';

      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');
      headers.forEach(header => {
        const th = document.createElement('th');
        th.textContent = header;
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);

      const tbody = document.createElement('tbody');
      data.forEach(row => {
        const tr = document.createElement('tr');
        row.forEach(cell => {
          const td = document.createElement('td');
          td.textContent = cell;
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
    }

    function loadDataFromStorage() {
      const data = JSON.parse(localStorage.getItem('transfer_data') || '[]');
      renderTable(data);
    }

    window.addEventListener('storage', e => {
      if (e.key === 'transfer_data_updated') {
        loadDataFromStorage();
      }
    });

    window.addEventListener('DOMContentLoaded', loadDataFromStorage);
  </script>
</body>
</html>
